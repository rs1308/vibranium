#!/bin/bash

source "$XDG_CONFIG_HOME/vibranium/theme/current/vibranium-lib-theme"

if ! pacman -Qq rofi-emoji 2>/dev/null; then
	msg="The emoji menu requires <span foreground='${P_YELLOW}'><b>rofi-emoji</b></span>, which is not installed.\n\n"
	msg+="<b><i>Click here to install</i></b>"
	if [ "$(notify-send -A true -r 4 -t 5000 -u critical "Vibranium" "$msg")" ]; then
		vibranium-pkg-install rofi-emoji
		exit 0
	else
		exit 1
	fi
fi

if pidof rofi >/dev/null; then
	killall rofi
	exit 0
fi

rofi -modi emoji -show emoji -p "Emoji" \
	-theme-str "window{width: 400px;}" \
	-emoji-format "{emoji} {name}"
