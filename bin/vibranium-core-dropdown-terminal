#!/usr/bin/env bash

TITLE="Dropdown terminal"
CLASS="dropdown-terminal"

if hyprctl clients -j | jq -e --arg title "$TITLE" '.[] | select(.title == $title)' > /dev/null; then
    WINADDR=$(hyprctl clients -j | jq -r --arg title "$TITLE" '.[] | select(.title == $title) | .address')
    hyprctl dispatch closewindow address:"$WINADDR"
else
    if pidof alacritty > /dev/null; then
        alacritty msg create-window --class "$CLASS" --title "$TITLE"
    else
        vibranium-cmd-launch-cmd alacritty --class "$CLASS" --title "$TITLE"
    fi
fi
