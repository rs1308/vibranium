#!/usr/bin/env bash

source "$VIBRANIUM_PATH/vibranium-core-lib"

ACTIONS=("System update" "Install a package" "Uninstall a package")

ACTIONS+=("<b><i>Categories</i></b>")

while :; do
    CHOSEN="$(printf "%s\n" "${ACTIONS[@]}" | rofi_cmd "Package management" "ESC to go back")"
	[[ -z $CHOSEN ]] && break

    case "$CHOSEN" in
		"System update")
			vibranium-cmd-launch-terminal vibranium-cmd-system-update
			vibranium-cmd-kill-rofi
			exit 0
			;;
        "Install a package")
            vibranium-cmd-launch-terminal vibranium-pkg-install
			vibranium-cmd-kill-rofi
            exit 0
            ;;
		*"Categories"*)
			vibranium-pkg-install-category
			;;
		"Uninstall a package")
			vibranium-cmd-launch-terminal vibranium-pkg-uninstall
			vibranium-cmd-kill-rofi
			exit 0
			;;
        *)
            continue
            ;;
    esac
done
